<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</title>
<style>
body{
    font-family: Arial;
    background:#f4f4f4;
    padding:20px;
}
.box{
    background:white;
    padding:20px;
    border-radius:12px;
    max-width:500px;
    margin:auto;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}
input,textarea{
    width:100%;
    padding:10px;
    margin-top:8px;
    border-radius:8px;
    border:1px solid #ccc;
}
button{
    width:100%;
    padding:12px;
    margin-top:12px;
    border:none;
    border-radius:10px;
    background:#ff4d6d;
    color:white;
    font-size:16px;
}
.media{
    margin-top:10px;
}
img,video,iframe{
    width:100%;
    border-radius:10px;
    margin-top:10px;
}
.success{
    background:#d4edda;
    padding:10px;
    border-radius:8px;
    margin-top:10px;
}
</style>
</head>
<body>

<div class="box" id="createPage">
<h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h2>

<input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">

<input type="number" id="price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)">

<textarea id="detail" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"></textarea>

<input type="file" id="imageUpload" accept="image/*,video/*">

<input type="text" id="youtube" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå YouTube (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">

<input type="text" id="passcode" maxlength="6" placeholder="‡∏£‡∏´‡∏±‡∏™ 6 ‡∏ï‡∏±‡∏ß (‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ)">

<button onclick="createLink()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå</button>

<div id="result"></div>

</div>

<div class="box" id="viewPage" style="display:none;">
<h2 id="v_name"></h2>
<p id="v_price"></p>
<p id="v_detail"></p>
<div id="v_media"></div>

<div id="unlockArea"></div>

</div>

<script>
function createLink(){

let name = document.getElementById("name").value;
let price = document.getElementById("price").value;
let detail = document.getElementById("detail").value;
let youtube = document.getElementById("youtube").value;
let passcode = document.getElementById("passcode").value;

if(passcode && passcode.length!=6){
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ï‡πâ‡∏≠‡∏á 6 ‡∏ï‡∏±‡∏ß");
    return;
}

let data = {
    name:name,
    price:price,
    detail:detail,
    youtube:youtube,
    passcode:passcode
};

let encoded = btoa(JSON.stringify(data));
let link = window.location.href.split("?")[0] + "?data=" + encoded;

document.getElementById("result").innerHTML = `
<div class="success">
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ<br><br>
<input value="${link}" readonly onclick="this.select()">
<br><br>
‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üíñ
</div>
`;
}

function loadItem(){

let params = new URLSearchParams(window.location.search);
let data = params.get("data");

if(!data) return;

document.getElementById("createPage").style.display="none";
document.getElementById("viewPage").style.display="block";

let item = JSON.parse(atob(data));

document.getElementById("v_name").innerText = item.name;
document.getElementById("v_price").innerText = "‡∏£‡∏≤‡∏Ñ‡∏≤: "+item.price+" ‡∏ö‡∏≤‡∏ó";
document.getElementById("v_detail").innerText = item.detail;

let mediaDiv = document.getElementById("v_media");

if(item.youtube){
let embed = item.youtube.replace("watch?v=","embed/");
mediaDiv.innerHTML += `<iframe height="250" src="${embed}" frameborder="0" allowfullscreen></iframe>`;
}

if(item.passcode){
document.getElementById("unlockArea").innerHTML = `
<input type="text" id="enterPass" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å">
<button onclick="checkPass('${item.passcode}')">‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å</button>
`;
}
}

function checkPass(realPass){
let input = document.getElementById("enterPass").value;
if(input===realPass){
alert("‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚ù§Ô∏è");
}else{
alert("‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
}
}

loadItem();
</script>

</body>
</html>
