<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Surprise Link üíñ</title>
<style>
body{
    font-family: Arial;
    background:#ffe6ec;
    padding:20px;
}
.box{
    background:white;
    padding:20px;
    border-radius:12px;
    max-width:500px;
    margin:auto;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}
input,textarea{
    width:100%;
    padding:10px;
    margin-top:8px;
    border-radius:8px;
    border:1px solid #ccc;
}
button{
    width:100%;
    padding:12px;
    margin-top:12px;
    border:none;
    border-radius:10px;
    background:#ff4d6d;
    color:white;
    font-size:16px;
}
.hidden{
    display:none;
}
.success{
    background:#d4edda;
    padding:10px;
    border-radius:8px;
    margin-top:10px;
}
</style>
</head>
<body>

<div class="box" id="createPage">
<h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå üíñ</h2>

<input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå (‡πÅ‡∏ü‡∏ô‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô)">
<input type="number" id="price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å)">
<textarea id="detail" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"></textarea>
<input type="text" id="youtube" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå YouTube (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
<input type="text" id="passcode" maxlength="6" placeholder="‡∏£‡∏´‡∏±‡∏™ 6 ‡∏ï‡∏±‡∏ß (‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ)">

<button onclick="createLink()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå</button>

<div id="result"></div>
</div>

<div class="box hidden" id="viewPage">

<h2>üéÅ ‡∏°‡∏µ‡∏Ñ‡∏ô‡∏ó‡∏≥‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì</h2>
<p>‡∏Å‡∏î‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô üíñ</p>

<div id="unlockArea"></div>

<div id="realContent" class="hidden">
<h3 id="v_name"></h3>
<p id="v_price"></p>
<p id="v_detail"></p>
<div id="v_media"></div>
</div>

</div>

<script>
function createLink(){

let data = {
    name: document.getElementById("name").value,
    price: document.getElementById("price").value,
    detail: document.getElementById("detail").value,
    youtube: document.getElementById("youtube").value,
    passcode: document.getElementById("passcode").value
};

if(data.passcode && data.passcode.length!=6){
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ï‡πâ‡∏≠‡∏á 6 ‡∏ï‡∏±‡∏ß");
    return;
}

let encoded = btoa(JSON.stringify(data));
let link = window.location.href.split("?")[0] + "?data=" + encoded;

document.getElementById("result").innerHTML = `
<div class="success">
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ<br><br>
<input value="${link}" readonly onclick="this.select()">
<br><br>
‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏ü‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üíñ
</div>
`;
}

function loadItem(){

let params = new URLSearchParams(window.location.search);
let data = params.get("data");

if(!data) return;

document.getElementById("createPage").classList.add("hidden");
document.getElementById("viewPage").classList.remove("hidden");

let item = JSON.parse(atob(data));

if(item.passcode){
document.getElementById("unlockArea").innerHTML = `
<input type="text" id="enterPass" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™ 6 ‡∏ï‡∏±‡∏ß">
<button onclick="checkPass('${item.passcode}', ${JSON.stringify(item)})">‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å</button>
`;
}else{
showContent(item);
}
}

function checkPass(realPass, item){
let input = document.getElementById("enterPass").value;
if(input===realPass){
showContent(item);
}else{
alert("‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
}
}

function showContent(item){

document.getElementById("realContent").classList.remove("hidden");

document.getElementById("v_name").innerText = "üíñ " + item.name;
document.getElementById("v_price").innerText = "‡∏£‡∏≤‡∏Ñ‡∏≤: " + item.price + " ‡∏ö‡∏≤‡∏ó";
document.getElementById("v_detail").innerText = item.detail;

if(item.youtube){
let embed = item.youtube.replace("watch?v=","embed/");
document.getElementById("v_media").innerHTML =
`<iframe width="100%" height="250" src="${embed}" frameborder="0" allowfullscreen></iframe>`;
}

document.getElementById("unlockArea").innerHTML="";
}

loadItem();
</script>

</body>
</html>
